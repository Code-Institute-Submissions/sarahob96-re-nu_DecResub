{% extends "base.html" %}
{% load static %}
{% load templatetags %}

{% block title %}
Shopping bag
{% endblock %}

{% block body %}

<div>
    <h2 class="text-center"> Shopping bag</h2> 
    {% if bag_contents %}
  
        <h5 class="text-center"> {{ product_count }} Items </div>
    <hr class="black w-50 pb-3">
    <div class="cart-container">
       
        <table class="table-responsive shopping-table ml-5 mr-5 text-center">
            <thead>
                <tr>
                    <th></th>
                    <th> Item</th>
                    <th> Size</th>
                    <th> Quantity</th>
                    <th></th>
                    <th> Price</th>
                    <th> Total </th>

                </tr>
            </thead>
          
            {% for contents in bag_contents %}
            <tr>
                {% if contents.product.image %}
                <td class="table-image">
                    <img class="img-fluid w-100" src="{{ contents.product.image.url }}">
                    {% else %}
                    <img class="w-100" src = "{{ MEDIA_URL }}noimage.png">
                </td>
                {% endif %}
                <td> {{ contents.product.name}}<br> <span class="text-muted">Item code:{{contents.product.sku}}</span></p> </td>
               <td> {% if contents.product.sizes %}{{ contents.size }}{%else%}ONE-SIZE{% endif %}</td>
                <td>{{ contents.qty}} </td>
                <td>{% include "bag/bag-quantity.html" %}</td>
                <td>€{{ contents.product.price }} </td>
                <td> €{{ contents.product.price | individual_total:contents.qty}}</td>
               
            </tr>
             {% endfor %}
        </table>
        <div class="bag-total float-right">
        <h5> Delivery Cost: €5.00 </h5>
        <h5>Bag Total: €{{ total|floatformat:2 }}</h5>
        <h4><strong>Grand Total :€{{ grand_total |floatformat:2}}  </strong></h4>
        </div>
        <div class="mt-5 pl-5 checkout-btn">
            <a href="{% url 'products' %}" class="shopping-link  mr-5"> Continue Shopping </a>
            <a href="{% url 'checkout' %}" class="checkout-link float-right"> Checkout <i class="fa-solid fa-cart-shopping"></i></a>
        </div>
       
        {% else %}
        <div class="text-center">
        <h4> You have no items in your shopping bag </h4>
        <br>
        <a href="{% url 'products' %}"> Shop now </a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block js %}
{{ block.super }}

{% include 'products/includes/product_quantity.html' %}
{% endblock %}
